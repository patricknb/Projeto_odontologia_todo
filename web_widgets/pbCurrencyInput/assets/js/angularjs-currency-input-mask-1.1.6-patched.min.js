/**
 * bonita-angularjs-currency-input-mask - AngularJS Multiple pattern currency input mask
 * @version v1.1.6
 * @link https://github.com/bonitasoft/angularjs-currency-input-mask#readme
 * @license MIT
 */
!function(i){"use strict";function d(e){return e.replace(/[^\d-]/g,"").replace(/(?!^-)-/g,"")}function m(e){return e&&e.replace(/\d/g,"")}function h(r){function n(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function i(e){return e.replace(/(\$)/g,"$$$1")}return{value:function(e){return this._value=e,this},clear:function(){return this._value=d(this._value),this},minimum:function(){var e,t,n;return 0<r.decimalSize&&(e=RegExp("^(\\d{1,"+r.decimalSize+"})$","g"),t="$1",n=r.decimalSize,n=new Array(n).concat([t]).join("0"),this._value=this._value.replace(e,n)),this},fraction:function(){var e,t;return 0<r.decimalSize&&(e=RegExp("(\\d)(?=\\d{"+r.decimalSize+"}$)","g"),t="$1"+r.decimal,this._value=this._value.replace(e,t)),this},ltrim:function(){var e=RegExp("(?=^)(0)(?!"+n(r.decimal)+")","g");return this._value=this._value.replace(e,""),this},group:function(){var e=0<r.decimalSize?n(r.decimal):"$",e=RegExp("(\\d)(?=(\\d{"+r.groupSize+"})+"+e+")","g"),t="$1"+r.group;return this._value=this._value.replace(e,t),this},currency:function(e){var t,n;return e="r"==r.orientation?(t=this.getRightOrientedCurrency(e),n=RegExp("(.)$","g"),"$1"+i(t)):(t=this.getLeftOrientedCurrency(e),n=RegExp("(^-?)(.?)","g"),"$1"+i(t)+"$2"),this._value=this._value.replace(n,e),this},getLeftOrientedCurrency:function(e){return(e||"")+(r.indentation||"")},getRightOrientedCurrency:function(e){return(r.indentation||"")+(e||"")},format:function(e,t){return this.value(e).clear().minimum().fraction().ltrim().group().currency(t).toString()},toString:function(){return this._value}}}function a(e,t){return(+(Math.round(e+"e+"+t)+"e-"+t)).toFixed(t)}i.module("cur.$mask",[]).factory("support",["$locale","$q","$timeout",function(r,e,c){return{config:function(e){var t=r.NUMBER_FORMATS||{},n=r.NUMBER_FORMATS.PATTERNS||{},t={indentation:"",orientation:"l",decimal:t.DECIMAL_SEP||".",group:t.GROUP_SEP||",",decimalSize:n.minFrac||2,groupSize:n.gSize||3};return i.extend({},t,e||{})},currency:function(e){return null!=e?e:r.NUMBER_FORMATS.CURRENCY_SYM||"$"},getCaretPosition:function(r){return e(function(n,e){c(function(){var e,t;document.selection?(e=(t=document.selection.createRange()).text.length,t.moveStart("character",-r.value.length),t=t.text.length-e,n({start:t,end:t+e})):r.selectionStart||"0"==r.selectionStart?n({start:r.selectionStart,end:r.selectionEnd}):n({start:0,end:0})})})},setCaretPosition:function(r,i){return e(function(t,n){c(function(){var e;r.setSelectionRange?(r.setSelectionRange(i,i),t(!0)):r.createTextRange&&((e=r.createTextRange()).collapse(!0),e.moveEnd("character",i),e.moveStart("character",i),e.select(),t(!0)),n(!1)})})},canMoveCaret:function(e){return e.setSelectionRange||e.createTextRange}}}]).directive("maskCurrency",["$locale","support",function(e,g){return{require:"ngModel",scope:{currency:"=maskCurrency",config:"="},link:function(n,u,t,o){var l,s;function f(e,t){return t=m(t),h(s).format(e,t)}function r(e,t){t=m(t);var n,r,i,c,a=null;return e&&(n=f(e,t),i=d(i=n),0<s.decimalSize&&(c=RegExp("(\\d)(?=\\d{"+s.decimalSize+"}$)","g"),i=i.replace(c,"$1.")),a=i,n==e?n=void 0:n==l&&"000"==n.replace(/[^\d]/g,"")&&(n="",a=null),void 0!==n&&(l=n,o.$setViewValue(n),o.$render(),"r"==s.orientation&&(r=n.indexOf(h(s).getRightOrientedCurrency(t)),g.getCaretPosition(u[0]).then(function(e){e.start==e.end&&e.start>r&&g.setCaretPosition(u[0],r)})))),a}function i(e){!isNaN(e)&&t.min?o.$setValidity("min",e>=t.min):o.$setValidity("min",!0)}function c(e){!isNaN(e)&&t.max?o.$setValidity("max",e<=t.max):o.$setValidity("max",!0)}o&&(s=g.config(n.config),n.$watch("currency",function(){r(o.$viewValue,g.currency(n.currency))}),n.$watch("config",function(e){s=g.config(e),g.canMoveCaret(u[0])||(s.orientation="l"),o.$viewValue&&r(o.$viewValue)}),o.$parsers.push(function(e){e=r(e,g.currency(n.currency)),e=parseFloat(e);return i(e),c(e),e}),o.$formatters.push(function(e){var t=e?f(a(e,s.decimalSize),g.currency(n.currency)):null,e=parseFloat(e);return i(e),c(e),t}))}}}]).filter("printCurrency",["support",function(r){return function(e,t,n){n=r.config(n);return e?h(n).format(a(e,n.decimalSize),t):null}}])}(angular);
//# sourceMappingURL=angularjs-currency-input-mask.js.map
